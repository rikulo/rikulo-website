var myScroll,_selItem,scrollbarWidth,responsiveCssDelay=800,pageInfo;$(function(){var b=$(".root-level"),a=$("#toc"),c=$(document).width();pageInfo={isTouch:isTouchDevice(),is960:c>959,is768:c<960&&c>767};scrollbarWidth=$.scrollbarWidth();if(pageInfo.isTouch){if(pageInfo.is960){setTimeout(function(){myScroll=new iScroll("toc",{hScrollbar:false,vScrollbar:false})},responsiveCssDelay)}$(".control-button").click(function(){var h=a.position().left,g=a.outerWidth(true),e=h==0,f=(a.height()-82)+"px";a.stop().animate({left:(e?-g-32:0)},600);$(".control-button").stop().animate({left:(e?0:g)},600);$("#content").css("max-height",(e?"":f)).css("overflow",(e?"":"hidden"));if(pageInfo.is768){$("#content").width(e?748:470).css("padding-left",(e?"0":"266px")).css("min-height",(e?"":f)).css("max-height","")}})}else{b.css("padding-right",scrollbarWidth+"px");a.hover(function(){this.style.overflow="auto";b.css("padding-right","")},function(){this.style.overflow="";b.css("padding-right",scrollbarWidth+"px")})}applySelected();if(!pageInfo.isTouch||pageInfo.is960){setTimeout(syncTocPos,responsiveCssDelay);setTimeout(bindScrollSync,responsiveCssDelay)}setTimeout(syncSelectedPos,responsiveCssDelay);var d;$(window).bind("onResponsiveCssChange",function(g,e,f){if(!d){syncSizeChanged()}else{if(d!=e){syncSizeChanged()}}d=e})});function applySelected(){var b=window.location.href,a=$("title");b=b.substring(b.indexOf("/rikulo/latest/"),b.length);if(b.charAt(b.length-1)=="/"){b=b.substring(0,b.length-1)}$("#toc a").each(function(){var c=$(this);if(c.attr("href")==b){_selItem=c;c.addClass("item-sel").removeAttr("href");a.html(c.html()+" | "+a.html());return false}})}function syncTocPos(){if(_selItem){var a=$("#toc"),b;if((b=$(document).scrollTop()-a.offset().top)>0){a[0].style.top=b+"px"}}}function syncSelectedPos(){if(_selItem){var b=$("#toc"),a=b.offset().top,c=b.scrollTop()-a+_selItem.offset().top;c=Math.max((c-40),0);if(isTouchDevice()&&myScroll){myScroll.scrollTo(0,-c,500)}else{b.stop().animate({scrollTop:c},500)}}}function bindScrollSync(){var a=$("#toc"),c=$("#content h1").offset().top,b,d;$(document).scroll(function(){clearTimeout(d);d=setTimeout(function(){if((b=$(document).scrollTop()-c)>0){a.stop().animate({top:b+"px"},100)}else{a[0].style.top=0}},50)})}function syncSizeChanged(){var c=$(".root-level"),b=$("#toc"),f=$(document).width();pageInfo.is960=f>959;pageInfo.is768=f<960&&f>767;if(pageInfo.isTouch){if(myScroll){myScroll.destroy();myScroll==null}if(pageInfo.is960){myScroll=new iScroll("toc",{hScrollbar:false,vScrollbar:false})}var g=b.position().left,e=b.outerWidth(true),a=g==0,d=(b.height()-82)+"px";$(".control-button").css("left","");b.css("top","").css("left","");$("#content").css("overflow","").css("width","").css("padding-left","").css("min-height","").css("max-height","");$(document).scrollTop(0)}$(document).unbind("scroll");if(!pageInfo.isTouch||pageInfo.is960){setTimeout(bindScrollSync,responsiveCssDelay)}};